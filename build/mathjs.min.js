/*! MathJS - v0.1.0 - 2014-10-19 */!function(a,b,c,d){"use strict";function e(a,b){return F.hasOwnProperty.call(a,b)}function f(a){return"[object Object]"===I.call(a)}function g(a){return"[object Function]"===I.call(a)}function h(a){return"[object String]"===I.call(a)}function i(a){return"[object Number]"===I.call(a)}function j(a){return"[object Boolean]"===I.call(a)}function k(a){return null===a}function l(a){return a===d}function m(a){return g(a)||K(a)||f(a)}function n(a){var b;if(g(a))return!1;if(i(a))return 0===a;if(K(a)||h(a))return 0===a.length;if(k(a))return!0;if(l(a))return!0;if(j(a))return!a;for(b in a)if(e(a,b))return!1;return!0}function o(a,b){return function(){a.apply(b,arguments)}}function p(a,b){if(!K(a))return!1;if(a.forEach)a.forEach(b);else for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function q(a,b){if(!K(a))return!1;if(a.every)return a.every(b);for(var c,d=0;c>d;d++)if(!b(a[d],d,a))return!1;return!0}function r(a){var b=null;if(f(a)){b={};for(var c in a)b[c]=m(a[c])?r(a[c]):a[c]}else if(K(a)){b=[];for(var d=0,e=a.length;e>d;d++)m(a[d])?b.push(r(a[d])):b.push(a[d])}else if(g(a)){var h=a.toString().replace(/[\r\n]*/gm,""),i=h.match(/function\s*(.*?)\s*\((.*?)\)\s*{(.*?)}/i),j=(i[1],i[2].replace(/\s+/g,"")),k=i[3];b=new Function(j,k)}else b=a;return b}function s(a){var b,c=G.slice.call(arguments,1),d=!1;j(c[c.length-1])&&(d=c.pop());for(var e=0,f=c.length;f>e;e++){b=c[e];for(var g in b)(d||!a[g])&&(a[g]=c[e][g])}return a}function t(a){return H.call(a)}function u(a){var c=null,d=null;return a instanceof HTMLElement?a:(c=b.createRange(),c.deleteContents(),c.selectNodeContents(b.body),d=c.createContextualFragment(a))}function v(a){var b,c,d={},e=0,f=0;for(b=a.split("&"),f=b.length;f>e;e++)c=b[e].split("="),d[c[0]]=c[1];return d}function w(a,c){c||(c={});var d=b.getElementById("template-"+a);return d?x(d.innerHTML,c):null}function x(a,b){var c=/#{(.*?)}/g,d="";return d=a.replace(c,function(a,c){return b[c]})}function y(a){function b(a){return g(a)&&(f?f.push(a):a(e)),this}function c(a){if(!d()){var b=f,c=0,g=b.length;for(e=a,f=null;g>c;c++)b[c].apply(b[c],arguments)}}function d(){return!f}var e,f=[],h={isResolved:d,done:b,resolve:c};return g(a)&&a(h),h}function z(a,b){b||(b={});var c=b.type||"GET",d=b.data||null,e=new J.Deferred,g=new XMLHttpRequest,h="",i="",j=null;if(g.onreadystatechange=function(){4===g.readyState&&(200===g.status||201===g.status?(e.resolve(g.responseText,g),e=null):e.reject(g))},f(d)){j=[];for(var k in d)h=d[k],i=encodeURIComponent(k).replace(/%20/g,"+")+"="+encodeURIComponent(h).replace(/%20/g,"+"),j.push(i);d=j.join("&")}return g.open(c,a),/post/i.test(c)&&g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),g.send(d),e}function A(a){var c=b.createElement("div"),d="",e="",f="",g="",h=[],i=null;if(a in c.style)i=a;else for(var j=0,k=L.length;k>j;++j){if(d=L[j]+a,h=/^(-)(\w+)-(\w)(\w+)$/.exec(d),f=h[2]+h[3].toUpperCase()+h[4],e=h[2].slice(0,1).toUpperCase(),h[2]=h[2].slice(1),g=e+h[2]+h[3].toUpperCase()+h[4],f in c.style){i=f;break}if(g in c.style){i=g;break}}return c=null,i}function B(a){function b(){return h.isResolved()?!1:(f.resolve.apply(null,arguments),void 0)}function c(){return f.isResolved()?!1:(h.resolve.apply(null,arguments),void 0)}function d(){return f.done.apply(null,arguments),this}function e(){return h.done.apply(null,arguments),this}var f=new y,h=new y,i={resolve:b,reject:c,done:d,fail:e};return g(a)&&a(i),i}function C(a){function b(b,d){f[d]=b,--e||(c.resolve(f),f=null,a=null)}for(var c=new B,d=a.length,e=d,f=new Array(d);d--;)!function(c){a[c].done(function(a){b(a,c)})}(d);return c}function D(a){function b(b){var e,f=+new Date;return g(b)?d?(clearTimeout(c),e=f-d,e>a?(b(),d=f):c=setTimeout(function(){b(),c=null,d=f},a),void 0):(b(),d=f,void 0):!1}var c,d;return{exec:b}}function E(){function a(){var c=b.shift(),d=Array.prototype.slice.call(arguments);d.push(a),"[object Function]"===I.call(c)&&c.apply(c,d)}var b=Array.prototype.slice.call(arguments);a()}var F=Object.prototype,G=Array.prototype,H=G.slice,I=F.toString,J={},K=Array.isArray||function(a){return"[object Array]"===I.call(a)},L=["-webkit-","-moz-","-ms-"];J.every=q,J.each=p,J.chain=E,J.Throttle=D,J.Deferred=B,J.when=C,J.makeArr=t,J.bind=o,J.clone=r,J.copyClone=s,J.isObject=f,J.isFunction=g,J.isString=h,J.isNumber=i,J.isArray=K,J.isReference=m,J.isNull=k,J.isUndefined=l,J.isEmpty=n,J.hasProp=e,J.ajax=z,J.getParams=v,J.template=x,J.getTemplate=w,J.makeHTMLNode=u,J.getCssPropSupport=A,J.nullFunction=function(){},J.abstractFunction=function(){throw new Error("MUST BE IMPLEMENT THIS FUNCTION.")},c.util=J}(window,document,window),function(a,b,c){var d={};d.getEle1=function(){return this[0]},d.setEle1=function(a){this[0]=a},d.getEle2=function(){return this[1]},d.setEle2=function(a){this[1]=a},d.getEle3=function(){return this[2]},d.setEle3=function(a){this[2]=a},d.getEle4=function(){return this[3]},d.setEle4=function(a){this[3]=a},d.getEle12=function(){return vec2(this.x,this.y)},d.setEle12=function(a){this[0]=a[0],this[1]=a[1]},d.getEle123=function(){return vec3(this[0],this[1],this[2])},d.setEle123=function(a){this[0]=a[0],this[1]=a[1],this[2]=a[2]},/*! ------------------------------------------------------------
        EXPORTS
    ---------------------------------------------------------------- */
c.MathJS=d}(window,document,window),function(a,b,c){"use strict";function d(a){var b=[];if(void 0===a)return d.identity(d.create());if(Array.isArray(a))return d.create(a);for(var c=0;9>c;c++)b.push(arguments[c]||0);return d.create(b)}{var e=Math.sin,f=Math.cos;Math.tan,Math.sqrt,Math.PI}d.create=function(a){return a||(a=9),new Float32Array(a)},d.identity=function(a){return a[0]=1,a[3]=0,a[6]=0,a[1]=0,a[4]=1,a[7]=0,a[2]=0,a[5]=0,a[8]=1,a},d.equal=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]},d.transpose=function(a){var b;return b=a[1],a[1]=a[3],a[3]=b,b=a[2],a[2]=a[6],a[6]=b,b=a[5],a[5]=a[7],a[7]=b,a},d.inverse=function(a,b){b||(b=d());var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return c=a[0],e=a[3],f=a[6],g=a[1],h=a[4],i=a[7],j=a[2],k=a[5],l=a[8],v=c*h*l+g*k*f+j*e*i-c*k*i-j*h*f-g*e*l,1e-4>v&&v>-1e-4?null:(m=(h*l-i*k)/v,n=(f*k-e*l)/v,o=(e*i-f*h)/v,p=(i*j-g*l)/v,q=(c*l-f*j)/v,r=(f*g-c*i)/v,s=(g*k-h*j)/v,t=(e*j-c*k)/v,u=(c*h-e*g)/v,b[0]=m,b[3]=n,b[6]=o,b[1]=p,b[4]=q,b[7]=r,b[2]=s,b[5]=t,b[8]=u,b)},d.copy=function(a,b){return b||(b=d()),b[0]=a[0],b[3]=a[3],b[6]=a[6],b[1]=a[1],b[4]=a[4],b[7]=a[7],b[2]=a[2],b[5]=a[5],b[8]=a[8],b},d.multiply=function(a,b,c){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;return c||(c=d()),w=a,x=b,e=w[0],f=w[3],g=w[6],h=w[1],i=w[4],j=w[7],k=w[2],l=w[5],m=w[8],n=x[0],o=x[3],p=x[6],q=x[1],r=x[4],s=x[7],t=x[2],u=x[5],v=x[8],c[0]=e*n+f*q+g*t,c[3]=e*o+f*r+g*u,c[6]=e*p+f*s+g*v,c[1]=h*n+i*q+j*t,c[4]=h*o+i*r+j*u,c[7]=h*p+i*s+j*v,c[2]=k*n+l*q+m*t,c[5]=k*o+l*r+m*u,c[8]=k*p+l*s+m*v,c},d.rotate=function(a,b){/*!
        * OpenGLのZ軸による回転行列（の2次元版）
        * | cos(r) -sin(r)  0 |
        * | sin(r)  cos(r)  0 |
        * |      0      0   1 |
        */
b||(b=d());var c=f(a),g=e(a);return b[0]=c,b[3]=-g,b[6]=0,b[1]=g,b[4]=c,b[7]=0,b[2]=0,b[5]=0,b[8]=1,b},d.scale=function(a,b){b||(b={});var c=a[0],d=a[1];return b[0]=c,b[3]=0,b[6]=0,b[1]=0,b[4]=d,b[7]=0,b[2]=0,b[5]=0,b[8]=1,b},d.translate=function(a,b){b||(b=d());var c=a[0],e=a[1];return b[0]=1,b[3]=0,b[6]=c,b[1]=0,b[4]=1,b[7]=e,b[2]=0,b[5]=0,b[8]=1,b},d.translate2=function(a,b,c){c||(c=d());var e=b[0],f=b[1];return c[0]=a[0],c[3]=a[3],c[1]=a[1],c[4]=a[4],c[2]=a[2],c[5]=a[5],c[6]=a[0]*e+a[3]*f+a[6],c[7]=a[1]*e+a[4]*f+a[7],c[8]=a[2]*e+a[5]*f+a[8],c},/*!--------------------------------------------------
      EXPORTS
      ----------------------------------------------------- */
c.mat3=d}(window,document,window),function(a,b,c){"use strict";function d(a){return k(a)<1e-6?0:a}function e(a){var b=[];if(void 0===a)return e.identity(e.create());if(Array.isArray(a))return e.create(a);if(Float32Array.prototype.isPrototypeOf(a)||Float64Array.prototype.isPrototypeOf(a)){for(var c=0;16>c;c++)b.push(arguments[0][c]||0);return e.create(b)}for(var c=0;16>c;c++)b.push(arguments[c]||0);return e.create(b)}var f=Math.sin,g=Math.cos,h=Math.tan,i=Math.sqrt,j=Math.PI,k=Math.abs,l=j/180;e.create=function(a){return a||(a=16),new Float32Array(a)},e.identity=function(a){return a[0]=1,a[4]=0,a[8]=0,a[12]=0,a[1]=0,a[5]=1,a[9]=0,a[13]=0,a[2]=0,a[6]=0,a[10]=1,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a},Object.defineProperty(e,"projectiveTexture",{set:function(){},get:function(){return e(.5,0,0,0,0,-.5,0,0,0,0,1,0,.5,.5,0,1)}}),Object.defineProperty(e,"zero",{set:function(){},get:function(){return e(0)}}),e.equal=function(a,b){return a[0]===b[0]&&a[4]===b[4]&&a[8]===b[8]&&a[12]===b[12]&&a[1]===b[1]&&a[5]===b[5]&&a[9]===b[9]&&a[13]===b[13]&&a[2]===b[2]&&a[6]===b[6]&&a[10]===b[10]&&a[14]===b[14]&&a[3]===b[3]&&a[7]===b[7]&&a[11]===b[11]&&a[15]===b[15]},e.transpose=function(a){var b;return b=a[1],a[1]=a[4],a[4]=b,b=a[2],a[2]=a[8],a[8]=b,b=a[6],a[6]=a[9],a[9]=b,b=a[3],a[3]=a[12],a[12]=b,b=a[7],a[7]=a[13],a[13]=b,b=a[11],a[11]=a[14],a[14]=b,a},e.inverse=function(a,b){b||(b=e());var c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;return c=a[0],d=a[4],f=a[8],g=a[12],h=a[1],i=a[5],j=a[9],k=a[13],l=a[2],m=a[6],n=a[10],o=a[14],p=a[3],q=a[7],r=a[11],s=a[15],J=c*i*n*s+c*j*o*q+c*k*m*r+d*h*o*r+d*j*l*s+d*k*n*p+f*h*m*s+f*i*o*p+f*k*l*q+g*h*n*q+g*i*l*r+g*j*m*p-c*i*o*r-c*j*m*s-c*k*n*q-d*h*n*s-d*j*o*p-d*k*l*r-f*h*o*q-f*i*l*s-f*k*m*p-g*h*m*r-g*i*n*p-g*j*l*q,1e-4>J&&J>-1e-4?null:(t=(i*n*s+j*o*q+k*m*r-i*o*r-j*m*s-k*n*q)/J,u=(d*o*r+f*m*s+g*n*q-d*n*s-f*o*q-g*m*r)/J,v=(d*j*s+f*k*q+g*i*r-d*k*r-f*i*s-g*j*q)/J,w=(d*k*n+f*i*o+g*j*m-d*j*o-f*k*m-g*i*n)/J,x=(h*o*r+j*l*s+k*n*p-h*n*s-j*o*p-k*l*r)/J,y=(c*n*s+f*o*p+g*l*r-c*o*r-f*l*s-g*n*p)/J,z=(c*k*r+f*h*s+g*j*p-c*j*s-f*k*p-g*h*r)/J,A=(c*j*o+f*k*l+g*h*n-c*k*n-f*h*o-g*j*l)/J,B=(h*m*s+i*o*p+k*l*q-h*o*q-i*l*s-k*m*p)/J,C=(c*o*q+d*l*s+g*m*p-c*m*s-d*o*p-g*l*q)/J,D=(c*i*s+d*k*p+g*h*q-c*k*q-d*h*s-g*i*p)/J,E=(c*k*m+d*h*o+g*i*l-c*i*o-d*k*l-g*h*m)/J,F=(h*n*q+i*l*r+j*m*p-h*m*r-i*n*p-j*l*q)/J,G=(c*m*r+d*n*p+f*l*q-c*n*q-d*l*r-f*m*p)/J,H=(c*j*q+d*h*r+f*i*p-c*i*r-d*j*p-f*h*q)/J,I=(c*i*n+d*j*l+f*h*m-c*j*m-d*h*n-f*i*l)/J,b[0]=t,b[4]=u,b[8]=v,b[12]=w,b[1]=x,b[5]=y,b[9]=z,b[13]=A,b[2]=B,b[6]=C,b[10]=D,b[14]=E,b[3]=F,b[7]=G,b[11]=H,b[15]=I,b)},e.copy=function(a,b){return b||(b=e()),b[0]=a[0],b[4]=a[4],b[8]=a[8],b[12]=a[12],b[1]=a[1],b[5]=a[5],b[9]=a[9],b[13]=a[13],b[2]=a[2],b[6]=a[6],b[10]=a[10],b[14]=a[14],b[3]=a[3],b[7]=a[7],b[11]=a[11],b[15]=a[15],b},e.toCSSMatrixString=function(a){return"matrix3d("+d(a[0])+","+d(a[1])+","+d(a[2])+","+d(a[3])+","+d(a[4])+","+d(a[5])+","+d(a[6])+","+d(a[7])+","+d(a[8])+","+d(a[9])+","+d(a[10])+","+d(a[11])+","+d(a[12])+","+d(a[13])+","+d(a[14])+","+d(a[15])+")"},e.makeFrustum=function(a,b,c,d,f,g,h){var i,j,k,l,m,n,o,p;return h||(h=e()),n=b-a,m=d-c,o=2*f/n,p=2*f/m,i=(b+a)/(b-a),j=(d+c)/(d-c),k=-(g+f)/(g-f),l=-(2*f*g)/(g-f),h[0]=o,h[4]=0,h[8]=i,h[12]=0,h[1]=0,h[5]=p,h[9]=j,h[13]=0,h[2]=0,h[6]=0,h[10]=k,h[14]=l,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,h},e.perspective=function(a,b,c,d,f){var g,i,j,k;return f||(f=e()),j=c*h(a*l*.5),k=-j,i=k*b,g=j*b,e.makeFrustum(i,g,k,j,c,d,f)},e.add=function(a,b,c){return c||(c=e()),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c[4]=a[4]+b[4],c[5]=a[5]+b[5],c[6]=a[6]+b[6],c[7]=a[7]+b[7],c[8]=a[8]+b[8],c[9]=a[9]+b[9],c[10]=a[10]+b[10],c[11]=a[11]+b[11],c[12]=a[12]+b[12],c[13]=a[13]+b[13],c[14]=a[14]+b[14],c[15]=a[15]+b[15],c},e.multiply=function(a,b,c){var d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;return c||(c=e()),K=a,L=b,d=K[0],f=K[4],g=K[8],h=K[12],i=K[1],j=K[5],k=K[9],l=K[13],m=K[2],n=K[6],o=K[10],p=K[14],q=K[3],r=K[7],s=K[11],t=K[15],u=L[0],v=L[4],w=L[8],x=L[12],y=L[1],z=L[5],A=L[9],B=L[13],C=L[2],D=L[6],E=L[10],F=L[14],G=L[3],H=L[7],I=L[11],J=L[15],c[0]=d*u+f*y+g*C+h*G,c[4]=d*v+f*z+g*D+h*H,c[8]=d*w+f*A+g*E+h*I,c[12]=d*x+f*B+g*F+h*J,c[1]=i*u+j*y+k*C+l*G,c[5]=i*v+j*z+k*D+l*H,c[9]=i*w+j*A+k*E+l*I,c[13]=i*x+j*B+k*F+l*J,c[2]=m*u+n*y+o*C+p*G,c[6]=m*v+n*z+o*D+p*H,c[10]=m*w+n*A+o*E+p*I,c[14]=m*x+n*B+o*F+p*J,c[3]=q*u+r*y+s*C+t*G,c[7]=q*v+r*z+s*D+t*H,c[11]=q*w+r*A+s*E+t*I,c[15]=q*x+r*B+s*F+t*J,c},e.multiplyScalar=function(a,b,c){return c||(c=e()),c[0]=a[0]*b,c[4]=a[4]*b,c[8]=a[8]*b,c[12]=a[12]*b,c[1]=a[1]*b,c[5]=a[5]*b,c[9]=a[9]*b,c[13]=a[13]*b,c[2]=a[2]*b,c[6]=a[6]*b,c[10]=a[10]*b,c[14]=a[14]*b,c[3]=a[3]*b,c[7]=a[7]*b,c[11]=a[11]*b,c[15]=a[15]*b,c},e.translate=function(a,b,c){var d=b[0],f=b[1],g=b[2];return c||(c=e()),c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[0]*d+a[4]*f+a[8]*g+a[12],c[13]=a[1]*d+a[5]*f+a[9]*g+a[13],c[14]=a[2]*d+a[6]*f+a[10]*g+a[14],c[15]=a[3]*d+a[7]*f+a[11]*g+a[15],c},e.scale=function(a,b,c){var d=b[0],f=b[1],g=b[2];return c||(c=e()),c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d,c[3]=a[3]*d,c[4]=a[4]*f,c[5]=a[5]*f,c[6]=a[6]*f,c[7]=a[7]*f,c[8]=a[8]*g,c[9]=a[9]*g,c[10]=a[10]*g,c[11]=a[11]*g,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},e.rotate=function(a,b,c,d){var h=c[0],j=c[1],k=c[2],m=i(h*h+j*j+k*k);if(d||(d=e()),!m)return null;1!==m&&(m=1/m,h*=m,j*=m,k*=m),b*=l;var n=e(),o=g(b),p=f(b),q=1-o,r=h*h,s=j*j,t=k*k,u=h*j,v=h*k,w=j*k,x=h*p,y=j*p,z=k*p;return n[0]=r*q+o,n[4]=u*q-z,n[8]=v*q+y,n[1]=u*q+z,n[5]=s*q+o,n[9]=w*q-x,n[2]=v*q-y,n[6]=w*q+x,n[10]=t*q+o,e.multiply(a,n,d)},e.lookAt=function(a,b,c,d){var f,g,h,i=vec3(),j=vec3(),k=vec3();d||(d=e()),vec3.normalize(vec3.sub(a,b,k)),vec3.normalize(vec3.cross(c,k,i)),vec3.normalize(vec3.cross(k,i,j)),f=vec3.dot(a,i),g=vec3.dot(a,j),h=vec3.dot(a,k);var l=i[0],m=i[1],n=i[2],o=j[0],p=j[1],q=j[2],r=k[0],s=k[1],t=k[2];return d[0]=l,d[4]=m,d[8]=n,d[12]=-f,d[1]=o,d[5]=p,d[9]=q,d[13]=-g,d[2]=r,d[6]=s,d[10]=t,d[14]=-h,d},/*!--------------------------------------------------
      EXPORTS
      ----------------------------------------------------- */
c.mat4=e}(window,document,window),function(a,b,c){"use strict";function d(a,b,c,e){return d.create(a,b,c,e)}var e=Math.sin,f=Math.cos,g=Math.acos,h=Math.sqrt;d.create=function(a,b,c,d){var e,f=[];return f=Array.isArray(a)||Float32Array.prototype.isPrototypeOf(a)?a:void 0===a?[1,0,0,0]:void 0===b?[a,a,a,a]:void 0===c?[a,b,0,0]:void 0===d?[a,b,c,0]:[a,b,c,d],e=new Float32Array(f),Object.defineProperties(e,{w:{get:MathJS.getEle1,set:MathJS.setEle1},x:{get:MathJS.getEle2,set:MathJS.setEle2},y:{get:MathJS.getEle3,set:MathJS.setEle3},z:{get:MathJS.getEle4,set:MathJS.setEle4}}),e},d.equal=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3];return c===g&&d===h&&e===i&&f===j},d.toMat=function(a,b){b||(b=mat4());var c,d,e,f,g,h,i,j,k,l,m,n,o;return c=a[0],d=a[1],e=a[2],f=a[3],g=2*d*d,h=2*e*e,i=2*f*f,j=2*d*e,k=2*e*f,l=2*f*d,m=2*c*d,n=2*c*e,o=2*c*f,b[0]=1-h-i,b[4]=j-o,b[8]=l+n,b[12]=0,b[1]=j+o,b[5]=1-i-g,b[9]=k-m,b[13]=0,b[2]=l-n,b[6]=k+m,b[10]=1-g-h,b[14]=0,b[3]=0,b[7]=0,b[11]=0,b[15]=1,b},d.toVec3=function(a,b,c){var e=d(),f=d(),g=d();return d.inverse(b,g),e[0]=a[0],e[1]=a[1],e[2]=a[2],d.multiply(g,e,f),d.multiply(f,b,g),c[0]=g[0],c[1]=g[1],c[2]=g[2],c},d.multiply=function(a,b,c){c||(c=d());var e,f,g,h,i,j,k,l;return e=a[0],f=a[1],g=a[2],h=a[3],i=b[0],j=b[1],k=b[2],l=b[3],c[0]=e*i-f*j-g*k-h*l,c[1]=e*j+f*i+g*l-h*k,c[2]=e*k-f*l+g*i+h*j,c[3]=e*l+f*k-g*j+h*i,c},d.rotate=function(a,b,c){c||(c=d());var g=.5*a,h=e(g);return c[0]=f(g),c[1]=h*b[0],c[2]=h*b[1],c[3]=h*b[2],c},d.rotateQt=function(a,b,c){c||(c=vec3());var d,e,f,g;return d=a.w*b.x+a.y*b.z-a.z*b.y,e=a.w*b.y+a.z*b.x-a.x*b.z,f=a.w*b.z+a.x*b.y-a.y*b.x,g=a.x*b.x+a.y*b.y+a.z*b.z,vec3.copy(vec3(g*a.x+d*a.w-e*a.z+f*a.y,g*a.y+e*a.w-f*a.x+d*a.z,g*a.z+f*a.w-d*a.y+e*a.x),c),c},d.inverse=function(a,b){return b||(b=d()),b[0]=a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b},d.slerp=function(a,b,c,f){f||(f=d());var i=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],j=1-i*i;if(0>=j)f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3];else{j=h(j);var k=g(i),l=k*c,m=e(k-l)/j,n=e(l)/j;f[0]=a[0]*m+b[0]*n,f[1]=a[1]*m+b[1]*n,f[2]=a[2]*m+b[2]*n,f[3]=a[3]*m+b[3]*n}return f},d.copy=function(a,b){return b||(b=d()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},/*!--------------------------------------------------
      EXPORTS
    ----------------------------------------------------- */
c.quat=d}(window,document,window),function(a,b,c){"use strict";function d(){return d.create.apply(d,arguments)}var e=Math.PI,f=Math.sqrt,g=Math.acos;Object.defineProperty(d,"zero",{enumerable:!0,set:function(){},get:function(){return d(0,0)}}),Object.defineProperty(d,"up",{enumerable:!0,set:function(){},get:function(){return d(0,1)}}),Object.defineProperty(d,"down",{enumerable:!0,set:function(){},get:function(){return d(0,-1)}}),Object.defineProperty(d,"right",{enumerable:!0,set:function(){},get:function(){return d(1,0)}}),Object.defineProperty(d,"left",{enumerable:!0,set:function(){},get:function(){return d(-1,0)}}),d.equal=function(a,b){var c=a[0],d=a[1],e=b[0],f=b[1];return c===e&&d===f},d.create=function(){for(var a,b=[],c=0,d=arguments.length;d>c;c++)if(a=arguments[c],Float32Array.prototype.isPrototypeOf(a))for(var e=0,f=a.length;f>e;e++)b=b.concat(a[e]);else b=b.concat(arguments[c]);switch(b.length>2&&(b.length=2),b.length){case 0:b[0]=0,b[1]=0;break;case 1:b[1]=b[0]}return b=new Float32Array(b),Object.defineProperties(b,{x:{get:MathJS.getEle1,set:MathJS.setEle1},y:{get:MathJS.getEle2,set:MathJS.setEle2}}),b},d.sub=function(a,b,c){return c||(c=d()),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c},d.add=function(a,b,c){return c||(c=d()),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c},d.copy=function(a,b){return b||(b=d()),b[0]=a[0],b[1]=a[1],b},d.norm=function(a){var b=a[0],c=a[1];return f(b*b+c*c)},d.lengthSqr=function(a){var b=a[0],c=a[1];return b*b+c*c},d.normalize=function(a,b){b||(b=d());var c=d.norm(a);return 0!==c&&(c=1/c,b[0]=a[0]*c,b[1]=a[1]*c),b},d.multiply=function(a,b,c){return c||(c=d()),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c},d.multiplyScalar=function(a,b,c){return c||(c=d()),c[0]=a[0]*b,c[1]=a[1]*b,c},d.minus=function(a,b){return b||(b=d()),b[0]=-a[0],b[1]=-a[1],b},d.dot=function(a,b){var c=a[0],d=a[1],e=b[0],f=b[1];return c*e+d*f},d.cross=function(a,b){var c=a[0],d=a[1],e=b[0],f=b[1];return c*f-d*e},d.lookAtRad=function(){function a(a,c){d.equal(a,b)&&(a=d.zero,a[0]=1e-5);var e=d.normalize(d.sub(c,a)),f=d.normalize(d.copy(a)),h=d.dot(e,f),i=d.cross(e,f);return i>0?-g(h):g(h)}var b=d.zero;return a}(),d.lookAtDeg=function(a,b){var c=d.lookAtRad(a,b);return 180*c/e},d.applyMatrix3=function(a,b,c){c||(c=d());var e=a[0],f=a[1];return c[0]=b[0]*e+b[3]*f+b[6],c[1]=b[1]*e+b[4]*f+b[7],c},d.toString=function(a){return""+a[0]+","+a[1]},/*!--------------------------------------------------
      EXPORTS
      ----------------------------------------------------- */
c.vec2=d}(window,document,window),function(a,b,c){"use strict";function d(){return d.create.apply(d,arguments)}var e=Math.PI,f=Math.sqrt,g=Math.acos;Object.defineProperty(d,"zero",{enumerable:!0,set:function(){},get:function(){return d(0,0,0)}}),Object.defineProperty(d,"up",{enumerable:!0,set:function(){},get:function(){return d(0,1,0)}}),Object.defineProperty(d,"down",{enumerable:!0,set:function(){},get:function(){return d(0,-1,0)}}),Object.defineProperty(d,"forward",{enumerable:!0,set:function(){},get:function(){return d(0,0,1)}}),Object.defineProperty(d,"back",{enumerable:!0,set:function(){},get:function(){return d(0,0,-1)}}),Object.defineProperty(d,"right",{enumerable:!0,set:function(){},get:function(){return d(1,0,0)}}),Object.defineProperty(d,"left",{enumerable:!0,set:function(){},get:function(){return d(-1,0,0)}}),d.equal=function(a,b){var c=a[0],d=a[1],e=a[2],f=b[0],g=b[1],h=b[2];return c===f&&d===g&&e===h},d.create=function(){for(var a,b=[],c=0,d=arguments.length;d>c;c++)if(a=arguments[c],Float32Array.prototype.isPrototypeOf(a))for(var e=0,f=a.length;f>e;e++)b=b.concat(a[e]);else b=b.concat(arguments[c]);switch(b.length>3&&(b.length=3),b.length){case 0:b[0]=0,b[1]=0,b[2]=0;break;case 1:b[1]=b[0],b[2]=b[0];break;case 2:b[2]=0}return b=new Float32Array(b),Object.defineProperties(b,{x:{get:MathJS.getEle1,set:MathJS.setEle1},y:{get:MathJS.getEle2,set:MathJS.setEle2},z:{get:MathJS.getEle3,set:MathJS.setEle3},xy:{get:MathJS.getEle12,set:MathJS.setEle12},r:{get:MathJS.getEle1,set:MathJS.setEle1},g:{get:MathJS.getEle2,set:MathJS.setEle2},b:{get:MathJS.getEle3,set:MathJS.setEle3},rg:{get:MathJS.getEle12,set:MathJS.setEle12}}),b},d.sub=function(a,b,c){return c||(c=d()),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c},d.add=function(a,b,c){return c||(c=d()),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c},d.copy=function(a,b){return b||(b=d()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b},d.norm=function(a){var b=a[0],c=a[1],d=a[2];return f(b*b+c*c+d*d)},d.lengthSqr=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},d.normalize=function(a){var b=d.norm(a);return 0!==b&&(b=1/b,a[0]*=b,a[1]*=b,a[2]*=b),a},d.multiply=function(a,b,c){return c||(c=d()),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c},d.multiplyScalar=function(a,b,c){return c||(c=d()),c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c},d.minus=function(a,b){return b||(b=d()),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b},d.dot=function(a,b){var c=a[0],d=a[1],e=a[2],f=b[0],g=b[1],h=b[2];return c*f+d*g+e*h},d.cross=function(a,b,c){c||(c=d());var e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2];return c[0]=f*j-g*i,c[1]=g*h-e*j,c[2]=e*i-f*h,c},d.applyMatrix3=function(a,b,c){c||(c=d());var e=a[0],f=a[1],g=a[2];return c[0]=b[0]*e+b[3]*f+b[6]*g,c[1]=b[1]*e+b[4]*f+b[7]*g,c[2]=b[2]*e+b[5]*f+b[8]*g,c},d.applyMatrix3FromRight=function(a,b,c){c||(c=d());var e=a[0],f=a[1],g=a[2];return c[0]=e*b[0]+f*b[1]+g*b[2],c[1]=e*b[3]+f*b[4]+g*b[5],c[2]=e*b[6]+f*b[7]+g*b[8],c},d.applyMatrix4=function(a,b,c){c||(c=d());var e=a[0],f=a[1],g=a[2];return c[0]=b[0]*e+b[4]*f+b[8]*g+b[12],c[1]=b[1]*e+b[5]*f+b[9]*g+b[13],c[2]=b[2]*e+b[6]*f+b[10]*g+b[14],c},d.applyMatrix4FromRight=function(a,b,c){c||(c=d());var e=a[0],f=a[1],g=a[2];return c[0]=e*b[0]+f*b[1]+g*b[2]+b[3],c[1]=e*b[4]+f*b[5]+g*b[6]+b[7],c[2]=e*b[8]+f*b[9]+g*b[10]+b[11],c},d.applyProjection=function(a,b,c){c||(c=d());var e,f,g,h,i,j,k,l;return f=a[0],g=a[1],h=a[2],e=b[3]*f+b[7]*g+b[11]*h+b[15],i=1/e,j=b[0]*f+b[4]*g+b[8]*h+b[12],k=b[1]*f+b[5]*g+b[9]*h+b[13],l=b[2]*f+b[6]*g+b[10]*h+b[14],j>=-e&&e>=j||k>=-e&&e>=k||l>=-e&&e>=l?(c[0]=j*i,c[1]=k*i,c[2]=l*i,c):!1},d.lookAtRad=function(){function a(a,c){d.equal(a,b)&&(a=d.zero,a[0]=1e-5);var e=d.normalize(d.sub(c,a)),f=d.normalize(d.copy(a)),h=d.dot(e,f);return g(h)}var b=d.zero;return a}(),d.lookAtDeg=function(a,b){var c=d.lookAtRad(a,b);return 180*c/e},d.toString=function(a){return""+a[0]+","+a[1]+","+a[2]},/*!--------------------------------------------------
      EXPORTS
      ----------------------------------------------------- */
c.vec3=d}(window,document,window),function(a,b,c){"use strict";function d(){return d.create.apply(d,arguments)}var e=Math.sqrt;Object.defineProperty(d,"zero",{enumerable:!0,set:function(){},get:function(){return d(0,0,0,1)}}),Object.defineProperty(d,"up",{enumerable:!0,set:function(){},get:function(){return d(0,1,0,1)}}),Object.defineProperty(d,"down",{enumerable:!0,set:function(){},get:function(){return d(0,-1,0,1)}}),Object.defineProperty(d,"forward",{enumerable:!0,set:function(){},get:function(){return d(0,0,1,1)}}),Object.defineProperty(d,"back",{enumerable:!0,set:function(){},get:function(){return d(0,0,-1,1)}}),Object.defineProperty(d,"right",{enumerable:!0,set:function(){},get:function(){return d(1,0,0,1)}}),Object.defineProperty(d,"left",{enumerable:!0,set:function(){},get:function(){return d(-1,0,0,1)}}),d.equal=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3];return c===g&&d===h&&e===i&&f===j},d.create=function(){for(var a,b=[],c=0,d=arguments.length;d>c;c++)if(a=arguments[c],Float32Array.prototype.isPrototypeOf(a))for(var e=0,f=a.length;f>e;e++)b=b.concat(a[e]);else b=b.concat(arguments[c]);switch(b.length>4&&(b.length=4),b.length){case 0:b[0]=0,b[1]=0,b[2]=0,b[3]=0;break;case 1:b[1]=b[0],b[2]=b[0],b[3]=b[0];break;case 2:b[2]=0,b[3]=0;break;case 3:b[3]=0}return b=new Float32Array(b),Object.defineProperties(b,{x:{get:MathJS.getEle1,set:MathJS.setEle1},y:{get:MathJS.getEle2,set:MathJS.setEle2},z:{get:MathJS.getEle3,set:MathJS.setEle3},w:{get:MathJS.getEle4,set:MathJS.setEle4},xy:{get:MathJS.getEle12,set:MathJS.setEle12},xyz:{get:MathJS.getEle123,set:MathJS.setEle123},r:{get:MathJS.getEle1,set:MathJS.setEle1},g:{get:MathJS.getEle2,set:MathJS.setEle2},b:{get:MathJS.getEle3,set:MathJS.setEle3},rg:{get:MathJS.getEle12,set:MathJS.setEle12},rgb:{get:MathJS.getEle123,set:MathJS.setEle123}}),b},d.sub=function(a,b,c){return c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],deset},d.add=function(a,b,c){return c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c},d.copy=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=void 0!==a[3]?a[3]:1,this},d.norm=function(a){var b=a[0],c=a[1],d=a[2],f=a[3];return e(b*b+c*c+d*d+f*f)},d.lengthSqr=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},d.normalize=function(a){var b=d.norm(a);return 0!==b?(b=1/b,a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b):(a[0]=0,a[1]=0,a[2]=0,a[3]=1),a},d.multiplyScalar=function(a,b,c){return c||(c=d()),c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c},d.minus=function(a,b){return b||(b=d()),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b},d.dot=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3];return c*g+d*h+e*i+f*j},d.applyMatrix4=function(a,b,c){c||(c=mat4());var d=a[0],e=a[1],f=a[2],g=a[3];return c[0]=b[0]*d+b[4]*e+b[8]*f+b[12]*g,c[1]=b[1]*d+b[5]*e+b[9]*f+b[13]*g,c[2]=b[2]*d+b[6]*e+b[10]*f+b[14]*g,c[3]=b[3]*d+b[7]*e+b[11]*f+b[15]*g,c},d.toString=function(a){return""+a[0]+","+a[1]+","+a[2]+","+a[3]},/*!--------------------------------------------------
      EXPORTS
      ----------------------------------------------------- */
c.vec4=d}(window,document,window),function(){"use strict";function a(a,b,c,d,e){for(var f=[],g=[],h=[],i=[],j=[],k=0;d>=k;k++)for(var l=0;c>=l;l++){var m=l/c*2-1,n=-(k/d*2-1),o=a*n,p=b*m,q=-(1/d*k),r=1/c*l,s=e?e:[1,1,1,1];f.push(o,0,p),g.push(0,1,0),h.push(s[0],s[1],s[2],s[3]),i.push(q,r)}for(k=0;d>k;k++)for(l=0;c>l;l++){var t=(d+1)*l+k,u=t,v=t+1,w=t+d+1,x=t+d+2;j.push(u,v,w),j.push(x,w,v)}this.position=f,this.normal=g,this.color=h,this.textureCoord=i,this.index=j}/*! ----------------------------------------------------
        EXPORTS.
    -------------------------------------------------------- */
window.Plane=a}(),function(){"use strict";function a(a,b,c,d){for(var e=[],f=[],g=[],h=[],i=[],j=0;a>=j;j++)for(var k=Math.PI/a*j,l=Math.cos(k),m=Math.sin(k),n=0;b>=n;n++){var o=2*Math.PI/b*n,p=m*c*Math.cos(o),q=l*c,r=m*c*Math.sin(o),s=m*Math.cos(o),t=m*Math.sin(o),u=d?d:[1,1,1,1];e.push(p,q,r),f.push(s,l,t),g.push(u[0],u[1],u[2],u[3]),h.push(1-1/b*n,1/a*j)}for(k=0,j=0;a>j;j++)for(n=0;b>n;n++){k=(b+1)*j+n;var v=k,w=k+1,x=k+b+2,y=k+b+1;i.push(v,w,x),i.push(v,x,y)}this.position=e,this.normal=f,this.color=g,this.textureCoord=h,this.index=i}/*! ----------------------------------------------------
        EXPORTS.
    -------------------------------------------------------- */
window.Sphere=a}(),function(){"use strict";function a(a,b,c,d,e){for(var f=[],g=[],h=[],i=[],j=[],k=0;a>=k;k++)for(var l=2*Math.PI/a*k,m=Math.cos(l),n=Math.sin(l),o=0;b>=o;o++){var p=2*Math.PI/b*o,q=(m*c+d)*Math.cos(p),r=n*c,s=(m*c+d)*Math.sin(p),t=m*Math.cos(p),u=m*Math.sin(p),v=e?e:[1,1,1,1],w=1/b*o,x=1/a*k+.5;x>1&&(x-=1),x=1-x,f.push(q,r,s),g.push(t,n,u),h.push(v[0],v[1],v[2],v[3]),i.push(w,x)}for(k=0;a>k;k++)for(o=0;b>o;o++){l=(b+1)*k+o;var y=l,z=l+b+1,A=l+1,B=l+b+2;j.push(y,z,A),j.push(z,B,A)}this.position=f,this.normal=g,this.color=h,this.textureCoord=i,this.index=j}/*! --------------------------------------------------------
        EXPORTS.
    ------------------------------------------------------------ */
window.Torus=a}(),function(a,b,c){"use strict";function d(a){var b,c,d,e,f,g,h,i;for(null==a&&(a=+new Date),f=123456789,g=362436069,h=521288629,e=88675123,c=0,d=[1812433254,3713160357,3109174145,64984499],b=i=0;4>=i;b=++i)d[b-1]=a=1812433253*(a^a>>30)+b;this.random=function(){var a;return c=d[0],e=d[3],a=[d[1],d[2],e],d[0]=a[0],d[1]=a[1],d[2]=a[2],c^=c<<11,c^=c>>8,e^=e>>19,e^=c,d[3]=e,2.3283064365386963e-10*e}}function e(a,b){var c,e,f,g,h;for(this.octave=null!=b?b:1,random=new d(a).random,h=[],c=f=0;256>f;c=++f)h[c]=floor(256*random());for(e=new Array(512),c=g=0;512>g;c=++g)e[c]=h[255&c];this.p=e}e.prototype._noise=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;return null==b&&(b=0),null==c&&(c=0),j=255&floor(a),k=255&floor(b),l=255&floor(c),a-=floor(a),b-=floor(b),c-=floor(c),n=this.fade(a),o=this.fade(b),p=this.fade(c),m=this.p,d=m[j+0]+k,e=m[d]+l,f=m[d+1]+l,g=m[j+1]+k,h=m[g]+l,i=m[g+1]+l,this.lerp(p,this.lerp(o,this.lerp(n,this.grad(m[e+0],a+0,b+0,c+0),this.grad(m[h+0],a-1,b+0,c+0)),this.lerp(n,this.grad(m[f+0],a+0,b-1,c+0),this.grad(m[i+0],a-1,b-1,c+0))),this.lerp(o,this.lerp(n,this.grad(m[e+1],a+0,b+0,c-1),this.grad(m[h+1],a-1,b+0,c-1)),this.lerp(n,this.grad(m[f+1],a+0,b-1,c-1),this.grad(m[i+1],a-1,b-1,c-1))))},e.prototype.fade=function(a){return a*a*a*(a*(6*a-15)+10)},e.prototype.lerp=function(a,b,c){return b+a*(c-b)},e.prototype.grad=function(a,b,c,d){var e,f,g;return e=15&a,f=8>e?b:c,g=4>e?c:12===e||14===e?b:d,(0===(1&e)?f:-f)+(0===(2&e)?g:-g)},e.prototype.octaves=function(a){return a?this.octave=a:this.octave},e.prototype.noise=function(){var a;switch(a=1<=arguments.length?__slice.call(arguments,0):[],a.length){case 1:return this.octaveNoise1.apply(this,arguments);case 2:return this.octaveNoise2.apply(this,arguments);case 3:return this.octaveNoise3.apply(this,arguments)}},e.prototype.octaveNoise1=function(a){var b,c,d,e,f;for(d=0,b=1,c=e=0,f=this.octave;f>=0?f>e:e>f;c=f>=0?++e:--e)d+=this._noise(a)*b,a*=2,b*=.5;return d},e.prototype.octaveNoise2=function(a,b){var c,d,e,f,g;for(e=0,c=1,d=f=0,g=this.octave;g>=0?g>f:f>g;d=g>=0?++f:--f)e+=this._noise(a,b)*c,a*=2,b*=2,c*=.5;return e},e.prototype.octaveNoise3=function(a,b,c){var d,e,f,g,h;for(f=0,d=1,e=g=0,h=this.octave;h>=0?h>g:g>h;e=h>=0?++g:--g)f+=this._noise(a,b,c)*d,a*=2,b*=2,c*=2,d*=.5;return f},/*!--------------------------------------------------
      EXPORTS
      ----------------------------------------------------- */
c.PerlinNoise=e,c.Xorshift=d}(window,document,window);